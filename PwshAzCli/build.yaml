name: PwshCoreAzCli-v0.$(date:yyMMdd)$(rev:.r)

trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

steps:
- task: VersionExtractor@5
  name: build
  displayName: 'Version extractor digit'
  inputs:
    stringToAnalyze: '$(Build.BuildNumber)'

- task: Docker@2
  displayName: 'Build and Push Container'
  inputs:
    containerRegistry: 'Experta-Main-Registry'
    repository: '$(Build.SourceBranchName).PwshCoreAzCli'
    command: 'buildAndPush'
    Dockerfile: '**/Dockerfile'
    tags: '$(build.fullVersion)'
